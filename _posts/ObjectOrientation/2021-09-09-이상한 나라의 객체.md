---
title:  "이상한 나라의 객체"
excerpt: "객체 지향의 사실과 오해"
categories:
  - Study
tag:
  - ObjectOrientation
toc: true
---

## 객체 
객체란 식별 가능한 개체 또는 사물이다. 객체는 자동차처럼 만질수 있는 구체적인 사물이 될 수도 있고, 시간처럼 추상적인 개념일 수도 있다. 객체는 구별 가능한 식별자(생성자?), 특징적인 행동(메소드?), 변경 가능한 상태(변수?)를 가진다.

- 객체는 상태(state), 행동(behavior), 식별자(identity)를 지닌 실체로 보는 것이 가장 효과적이다.
- 객체는 상태를 가지며 상태는 변경 가능하다.
- 상태를 변경시키는 것은 행동이다.
  * 행동의 결과는 상태에 의존적이며 상태를 이용해 서술할 수 있다.
  * 행동의 순서와 결과에 영향을 미친다.
- 어떤 상태에 있어도 유일하게 식별이 가능하다.


### 상태
객체가 주변 환경과의 상호작용에 어떻게 반응하는가는 그 시점까지 객체에 어떤 일이 발생하느냐에 좌우된다.  
비행기를 탄다고 가정하면 항공권을 발권하는 행동이 발생했는지 여부에 따라 상태(타거나 못타거나)는 달라진다.   
어떤 행동에 결과는 과거에 어떤 행동들이 일어났었냐에 의존한다는 것이다.

**상태와 프로퍼티**
- 숫자, 문자열, 양, 속도, 시간, 날짜, 참/거짓 같은 단순한 값들은 객체가 아니다. 
- 단순한 값들은 그 자체로 독립적인 의미를 가지기 보다는 다른 객체의 특성을 표현하는데 사용된다.
- 객체의 상태를 표현하기 위한 중요한 수단이다.
- 객체를 사용해 다른 객체의 상태를 표현해야 할때가 있다.
- 결론적으로 객체의 상태는 단순한 값과 객체의 조합으로 표현한다.
- 이때 객체의 상태를 구성하는 모든 특징을 통들어 객체의 프로퍼티라고 한다.
  * 다른 객체의 조합도 상태를 표현하기 위해 프로퍼티로 둔다고 생각하면된다.
- 객체와 객체 사이의 의미있는 연결을 링크라고 한다. 링크가 존재해야만 요청(메시지)을 보내고 받을 수 있다.
  * 프로퍼티는 속성과 연관관계의 두가지 종류로 구분된다고 생각하면 된다.
  * 연관 관계는 정정인 관계를 의미하여 링크는 연관 관계의 인슽너스다.

>상태 정의  
>상태는 특정 시점에 객체가 가지고 있는 정보의 집합으로 객체의 구조적 특징을 표현한다. 객체의 상태는 객체에 존재하는 정적인 프로퍼티와 동적인 프로퍼티 값으로 구성된다. 객체의 프로퍼티는 단순한 값과 다른 객체를 참조하는 링크로 구분할 수 있다.


### 행동
외부의 객체가 직접적으로 객체의 상태를 주무를 수 없다면 간접적으로 객체의 상태를 변경하거나 조회 할 수 있는 방법이 필요하다.  
행동은 다른 객체로 하여금 간접적으로 객체의 상태를 변경하는 것을 가능하게 한다.

>객체 지향의 기본사상은 상태와 상태를 조작하기 위한 행동을 하나의 단위로 묶는 것이다.(캡슐화)

**상태와 행동**  
- 객체가 취하는 행동은 자신의 상태를 변경시킨다.
  * 객체의 상태가 변경된다는 것은 행동이 부수 효과(side effect)를 초래한다는 것을 의미한다.
- 부수 효과의 개념을 이용하면 객체의 행동을 상태 변경의 관점에서 쉽게 기술할 수 있다.


**상태와 행동 사이의 관계**
- 객체의 행동은 상태에 영향을 받는다.
  * 자동차에 기름이 없으면 기름을 넣을 수 있고 기름이 있으면 넣을 수 없다.
    * 기름을 넣는 다는 행동의 결과는 자동차의 상태에 의존적이다.
- 객체의 행동은 상태를 변경시킨다.
  * 기름이 있으면 자동차는 움직일수 있고 없으면 움직일수 없다.
- 상태라는 개념을 이용해 행동을 두가지 관점에서 서술이 가능하다.
  * 상호작용이 현재의 상태에 어떤 방식으로 의존하는가
  * 상호작용이 어떻게 현재의 상태를 변경경시키는가

**자동차가 움직이는 행동을 상태 관점에서의 설명**
- 자동차의 기름, 위치 라는 상태를 가지고 간단하게 서술할 수 있다.
- 기름이 있으면 움직일수 있다.
- 자동차가 움직이면 위치는 다른곳으로 변경되어야 한다.

**협력과 행동**
- 객체는 자신에게 주어진 책임을 완수하기위해 다른 객체를 이용하고 서비스를 제공한다.
- 다른 객체와의 협력한늡 방법은 메시지를 통해서만 가능하다.
- 객체는 수신된 메시지에 따라 적절히 행동하면서 협력하고 그 결과로 자신의 상태를 변경한다.

**상태 캡슐화**
- 현실과는 다르게 객체지향의 모든 객체는 자신의 상태를 스스로 관리하는 자율적인 존재다.
- 사람과 자동차 객체가 있는경우 자동차의 기름 상태를 변경하는건 사람이 아닌 자동차 객체 자신이어야 한다.
  * 사람은 자동차에게 기름을 주입한다는 메시지만을 전달하고 자동차가 스스로 상태를 변경한다.
  * setOil() -> (사람) -> drunkenOil(quantity) -> (자동차)
  * 사람에게 전달되는 메시지는 setOil()이고 자동차에게 전달되는 메시지는 drunkenOil(quantity)이다.
- 각 객체는 서로에게 메시지를 보내김나 하고 상태가 변경되는지 여부는 알수없다.(캡슐화)

>행동 정의  
>행동이란 외부의 요청 또는 수신된 메시지에 응답하기 위해 동작하고 반응하는 활동이다. 행동의 결과로 객체는 자신의 상태를 변경하거나 다른 객체에게 메시지를 전달할 수 있다. 객체는 행동을 통해 다른 객체와 협력에 참여하므로 행동은 외부에 가시적이어야 한다.


### 식별자
객체란 인간의 인지 능력을 이용해 식별 가능한 경계를 가진 모든 사물을 말한다.  
식별이 가능하다는 것은 서로 구별할 수 있는 특정한 프로퍼티가 객체 안에 존재한다는 것을 의미한다.  


**값(value)**
- 숫자, 문자열, 날짜, 시간, 금액 등과 같이 변하지 않는 양을 모델링한다.
- 흔히 값의 상태느 변하지 않기 때문에 불변 상태를 가진다고 말한다.
- 값의 상태가 같으면 두 인스턴스는 동일한 것으로 판단한다.(동등성)
- 값은 오직 상태만을 이용해 동등성을 판단하기 때문에 인스턴스를 구별하기 위한 별도의 식별자는 필요로 하지 않는다.

**동일성**
- 객체는 시간에 따라 변경되는 상태를 포함하며, 행동을 통해 상태를 변경한다. 따라서 객체는 가변 상태를 가진다고 말한다.
- 사람이 시간이 지나면 크듯이 어린시절의 사람과 동일 인물이다. 이처럼 객체 역시 유사하게 상태와 무관하게 두 객체를 동일하거나 다르다고 판단할 수 있는 프로퍼티를 가진다.

>식별자 정의  
>어떤 객체를 다른 객체와 구분하는데 사용하는 객체의 프로퍼티다. 값은 식별자를 가지지 않기 때문에 상태를 이용한 동등성 검사를 통해 두 인스턴스를 비교해야 한다. 객체는 상태가 변경될 수 있기 때문에 식별자를 이용한 동일성 검사를 통해 두 인스턴스를 비교할 수 있다.

**값과 객체의 구분**
- 객체지향 프로그래밍 언어에서는 값과 객체 모두 클래스를 이용해 구현되기 때문에 구분하기가 어렵다. 
- 참조객체 또는 엔티티는 식별자를 지는 전통적인 의미의 객체를 가르키는 용어다
- 값 객체는 식별자를 가지지 않는 갓을 가리키는 용어다.


## 행동이 상태를 결정한다.
상태를 먼저 결정하고 행동을 나중에 결정하는 방법은 설계에 나쁜 영향을 끼친다.

1. 상태를 먼저 결정할 경우 캡슐화가 저해된다.
  * 상태에 초첨을 맞출 경우 상태가 객체 내부로 깔끔하게 캡슐화 되지 못하고 공용 인터페이스에 그대로 노출되버릴 확률이 높아진다.
1. 객체를 협력자가 아닌 고립된 섬으로 만든다.
  * 객체가 필요한 이유는 애플리케이션이 문맥 내에서 다른 객체와 협력하기 위해서이다. 상태를 먼져 고려하는 방식은 협력이라는 문맥을 고려하기전에 만들어져 적합하지 못한 객체를 장초하게 된다.
1. 객체의 사용성이 저하된다.
  * 객체의 재사용성은 다양한 협력에 참여할 수 있는 능력에서 나온다. 상태에 초점을 맞춘 객체는 다양한 협력에 참여하기 어렵다.

>객체 지향 설계는 애플리케이션에 필요한 협력을 생각하고 협력에 참여하는 데 필요한 행동을 생각한 후 행동을 수행할 객체를 선택하는 방식으로 수행된다. 행동을 결정한 후에야 행동에 필요한 정보가 무엇인지를 고려하게 되며 이 과정에서 필요한 상태가 결정된다. 따라서 먼저 객체의 행동을 결정하고 그 후에 행동에 적절한 상태를 선택하게 된다.
>  
>협력 안에서 객체의 행동은 결국 객체가 협력에 참여함면서 완료해야 하는 책임을 의미한다. 따라서 어떤 책임이 필요한가를 결정하는 과정이 전체 설계를 주도해야 한다.(책임-주도 설계)

**중요 포인트**  
가장 중요한 부분은 행동이 상태를 결정한다 이다.  
이 책을 보는 방금전까지도 객체를 만들때 상태를 결정하고 행동을 만들었다. 상태를 먼져 결정하다보니 중복 되는 부분들도 많고 없애야 되는 부분들과 추가해야 되는 부분들도 나온다.  
행동을 먼져 결정함으로써 어떤 상태들이 필요한지 알게 되고 어떤 객체와 통신을 해야 할지도 명학해 질 것 같다.
